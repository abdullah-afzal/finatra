
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Explicit Binding with #bind[T] &#8212; Finatra 24.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/flasky.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Finatra Presentations" href="../../presentations/index.html" />
    <link rel="prev" title="Override Modules" href="override_modules.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../../_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-4', 'twitter.github.io');
    ga('send', 'pageview');

  </script>

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../presentations/index.html" title="Finatra Presentations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="override_modules.html" title="Override Modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Finatra</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">User’s Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Explicit Binding with <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="explicit-binding-with-bind-t">
<span id="bind-dsl"></span><h1>Explicit Binding with <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code><a class="headerlink" href="#explicit-binding-with-bind-t" title="Permalink to this headline">¶</a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Please see the section on including test-jar dependencies in your project:
<a class="reference external" href="../..#test-dependencies">Test Dependencies</a>.</p>
</div>
<section id="embedded-bind-t">
<h2>Embedded <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code><a class="headerlink" href="#embedded-bind-t" title="Permalink to this headline">¶</a></h2>
<p>In the cases where we’d like to easily replace a bound instance with another instance in our tests
(e.g. with a mock or a simple stub implementation), we do not need to create a specific module
for testing to compose into our server as an override module. Instead we can use the <cite>#bind[T]</cite>
function on the embedded server.</p>
<p>This is especially useful if you want to replace a bound instance with a mock under control of the
test.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">finatra</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">EmbeddedHttpServer</span><span class="p">,</span> <span class="nc">HttpTest</span><span class="p">}</span>
<span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">inject</span><span class="p">.</span><span class="nn">server</span><span class="p">.</span><span class="nc">FeatureTest</span>
<span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">util</span><span class="p">.</span><span class="nn">mock</span><span class="p">.</span><span class="nc">Mockito</span>

<span class="k">class</span> <span class="nc">ExampleFeatureTest</span>
  <span class="k">extends</span> <span class="nc">FeatureTest</span>
  <span class="k">with</span> <span class="nc">Mockito</span>
  <span class="k">with</span> <span class="nc">HttpTest</span> <span class="p">{</span>

  <span class="k">private</span> <span class="kd">val</span> <span class="n">mockDownstreamServiceClient</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">DownstreamServiceClient</span><span class="p">]</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="n">mockIdService</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">IdService</span><span class="p">]</span>

  <span class="k">override</span> <span class="kd">val</span> <span class="n">server</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nc">EmbeddedHttpServer</span><span class="p">(</span><span class="k">new</span> <span class="nc">ExampleServer</span><span class="p">)</span>
    <span class="p">.</span><span class="n">bind</span><span class="p">[</span><span class="nc">DownstreamServiceClient</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="n">mockDownstreamServiceClient</span><span class="p">)</span>
    <span class="p">.</span><span class="n">bind</span><span class="p">[</span><span class="nc">IdService</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="n">mockIdService</span><span class="p">)</span>

  <span class="n">test</span><span class="p">(</span><span class="s">&quot;service test&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* Mock GET Request performed by DownstreamServiceClient */</span>
    <span class="n">mockDownstreamServiceClient</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/tweets/123.json&quot;</span><span class="p">)(</span><span class="n">manifest</span><span class="p">[</span><span class="nc">FooResponse</span><span class="p">])</span> <span class="n">returns</span> <span class="nc">Future</span><span class="p">(</span><span class="nc">None</span><span class="p">)</span>
    <span class="p">...</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>For a complete example, see the
<a class="reference external" href="https://github.com/twitter/finatra/blob/develop/examples/advanced/twitter-clone/src/test/scala/finatra/quickstart/TwitterCloneFeatureTest.scala">TwitterCloneFeatureTest</a>.</p>
<p>Note this is also available for <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-app/src/test/scala/com/twitter/inject/app/EmbeddedApp.scala">EmbeddedApp</a>
as well:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">finagle</span><span class="p">.</span><span class="nn">stats</span><span class="p">.</span><span class="nc">InMemoryStatsReceiver</span>
<span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">inject</span><span class="p">.</span><span class="nc">Test</span>
<span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">inject</span><span class="p">.</span><span class="nn">app</span><span class="p">.</span><span class="nc">EmbeddedApp</span>
<span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">util</span><span class="p">.</span><span class="nn">mock</span><span class="p">.</span><span class="nc">Mockito</span>

<span class="k">class</span> <span class="nc">MyAppTest</span> <span class="k">extends</span> <span class="nc">Test</span> <span class="k">with</span> <span class="nc">Mockito</span> <span class="p">{</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="n">inMemoryStatsReceiver</span><span class="p">:</span> <span class="nc">InMemoryStatsReceiver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InMemoryStatsReceiver</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="n">mockIdService</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">IdService</span><span class="p">]</span>

  <span class="c1">// build an EmbeddedApp</span>
  <span class="k">def</span> <span class="nf">app</span><span class="p">():</span> <span class="nc">EmbeddedApp</span> <span class="o">=</span> <span class="n">app</span><span class="p">(</span><span class="k">new</span> <span class="nc">MyApp</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="n">underlying</span><span class="p">:</span> <span class="nc">MyApp</span><span class="p">):</span> <span class="nc">EmbeddedApp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nc">EmbeddedApp</span><span class="p">(</span><span class="n">underlying</span><span class="p">)</span>
      <span class="p">.</span><span class="n">bind</span><span class="p">[</span><span class="nc">IdService</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="n">mockIdService</span><span class="p">)</span>
      <span class="p">.</span><span class="n">bind</span><span class="p">[</span><span class="nc">StatsReceiver</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="n">inMemoryStatsReceiver</span><span class="p">)</span>

  <span class="n">test</span><span class="p">(</span><span class="s">&quot;assert count&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="n">undertest</span> <span class="o">=</span> <span class="n">app</span><span class="p">()</span>
    <span class="n">undertest</span><span class="p">.</span><span class="n">main</span><span class="p">(</span><span class="s">&quot;username&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;jack&quot;</span><span class="p">)</span>

    <span class="kd">val</span> <span class="n">statsReceiver</span> <span class="o">=</span> <span class="n">undertest</span><span class="p">.</span><span class="n">injector</span><span class="p">.</span><span class="n">instance</span><span class="p">[</span><span class="nc">StatsReceiver</span><span class="p">].</span><span class="k">asInstanceOf</span><span class="p">[</span><span class="nc">InMemoryStatsReceiver</span><span class="p">]</span>
    <span class="n">statsReceiver</span><span class="p">.</span><span class="n">counter</span><span class="p">(</span><span class="s">&quot;my_counter&quot;</span><span class="p">)()</span> <span class="n">shouldEqual</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="testinjector-bind-t">
<h2>TestInjector <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code><a class="headerlink" href="#testinjector-bind-t" title="Permalink to this headline">¶</a></h2>
<p>As described in the <a class="reference external" href="./integration_tests.html">Integration Tests</a> section you can use the
<a class="reference external" href="./integration_tests.html#id2"><cite>TestInjector</cite></a> to construct a minimal object graph for testing. The <cite>TestInjector</cite> also supports a
<cite>bind[T]</cite> function to let you replace bound instances in the constructed object graph with another
instance, like a mock or stub.</p>
<p>E.g.,</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">com</span><span class="p">.</span><span class="nn">twitter</span><span class="p">.</span><span class="nn">inject</span><span class="p">.</span><span class="nc">IntegrationTest</span>

<span class="k">class</span> <span class="nc">ExampleIntegrationTest</span> <span class="k">extends</span> <span class="nc">IntegrationTest</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="n">mockIdService</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">IdService</span><span class="p">]</span>

  <span class="k">override</span> <span class="kd">val</span> <span class="n">injector</span> <span class="o">=</span>
    <span class="nc">TestInjector</span><span class="p">(</span>
      <span class="n">flags</span> <span class="o">=</span>
        <span class="nc">Map</span><span class="p">(</span><span class="s">&quot;foo.flag&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;meaningfulValue&quot;</span><span class="p">),</span>
      <span class="n">modules</span> <span class="o">=</span>
        <span class="nc">Seq</span><span class="p">(</span><span class="nc">ExampleModule</span><span class="p">,</span> <span class="nc">IdServiceModule</span><span class="p">))</span>
      <span class="p">.</span><span class="n">bind</span><span class="p">[</span><span class="nc">IdService</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="n">mockIdService</span><span class="p">)</span>
      <span class="p">.</span><span class="n">create</span>

  <span class="n">test</span><span class="p">(</span><span class="s">&quot;MyTest#perform feature&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example, the bound <cite>IdService</cite> would be replaced with the <cite>mockIdService</cite>. For a more complete
example, see the <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/http-server/src/test/scala/com/twitter/finatra/http/tests/integration/darktraffic/test/DarkTrafficCanonicalResourceHeaderTest.scala">DarkTrafficCanonicalResourceHeaderTest</a>.</p>
</section>
<section id="bind-t-dsl">
<h2><a class="reference external" href="https://github.com/twitter/finatra/tree/develop/inject/inject-app/src/test/scala/com/twitter/inject/app/BindDSL.scala"><cite>#bind[T]</cite></a> DSL<a class="headerlink" href="#bind-t-dsl" title="Permalink to this headline">¶</a></h2>
<p>The primary DSL can be expressed as such (and is similar to the Guice <a class="reference external" href="https://github.com/google/guice/wiki/LinkedBindings">Linked</a>
and <a class="reference external" href="https://github.com/google/guice/wiki/InstanceBindings">Instance</a> bindings):</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">to</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">to</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>

<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Ann</span><span class="p">].</span><span class="n">to</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Ann</span><span class="p">].</span><span class="n">to</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Ann</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>

<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">Ann</span><span class="p">]].</span><span class="n">to</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">Ann</span><span class="p">]].</span><span class="n">to</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">Ann</span><span class="p">]].</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>

<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">(</span><span class="nc">Annotation</span><span class="p">).</span><span class="n">to</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">(</span><span class="nc">Annotation</span><span class="p">).</span><span class="n">to</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bind</span><span class="p">[</span><span class="nc">T</span><span class="p">].</span><span class="n">annotatedWith</span><span class="p">(</span><span class="nc">Annotation</span><span class="p">).</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>

<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">to</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">to</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>

<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">Ann</span><span class="p">]].</span><span class="n">to</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">Ann</span><span class="p">]].[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">annotatedWith</span><span class="p">[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">Ann</span><span class="p">]].</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>

<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">annotatedWith</span><span class="p">(</span><span class="nc">Annotation</span><span class="p">).</span><span class="n">to</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">annotatedWith</span><span class="p">(</span><span class="nc">Annotation</span><span class="p">).[</span><span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">]]</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">]).</span><span class="n">annotatedWith</span><span class="p">(</span><span class="nc">Annotation</span><span class="p">).</span><span class="n">toInstance</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="usage-from-java">
<h2>Usage from Java<a class="headerlink" href="#usage-from-java" title="Permalink to this headline">¶</a></h2>
<p>The <cite>#bind[T]</cite> DSL also provides several Java-friendly methods for binding:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">T</span><span class="p">)</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">Annotation</span><span class="p">,</span> <span class="nc">T</span><span class="p">)</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">Class</span><span class="p">[</span><span class="nc">Annotation</span><span class="p">],</span> <span class="nc">T</span><span class="p">)</span>

<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">])</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">Annotation</span><span class="p">,</span> <span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">])</span>
<span class="n">bindClass</span><span class="p">(</span><span class="nc">Class</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">Class</span><span class="p">[</span><span class="nc">Annotation</span><span class="p">],</span> <span class="nc">Class</span><span class="p">[</span><span class="nc">U</span> <span class="o">&lt;:</span> <span class="nc">T</span><span class="p">])</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.google.inject.Stage</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.junit.AfterClass</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Assert</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.BeforeClass</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.twitter.finagle.http.Request</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.twitter.finagle.http.Response</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.twitter.finagle.http.Status</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.twitter.finatra.http.EmbeddedHttpServer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.twitter.finatra.http.request.RequestBuilder</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.twitter.inject.annotations.Flags</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldServerFeatureTest</span> <span class="kd">extends</span> <span class="n">Assert</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">EmbeddedHttpServer</span> <span class="n">SERVER</span> <span class="o">=</span> <span class="n">setup</span><span class="p">();</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">EmbeddedHttpServer</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">EmbeddedHttpServer</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EmbeddedHttpServer</span><span class="p">(</span>
            <span class="k">new</span> <span class="n">HelloWorldServer</span><span class="p">(),</span>
            <span class="n">Collections</span><span class="p">.</span><span class="na">emptyMap</span><span class="p">(),</span>
            <span class="n">Stage</span><span class="p">.</span><span class="na">DEVELOPMENT</span><span class="p">);</span>

        <span class="n">server</span><span class="p">.</span><span class="na">bindClass</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">Flags</span><span class="p">.</span><span class="na">named</span><span class="p">(</span><span class="s">&quot;magic.number&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span>
        <span class="n">server</span><span class="p">.</span><span class="na">bindClass</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">Flags</span><span class="p">.</span><span class="na">named</span><span class="p">(</span><span class="s">&quot;module.magic.number&quot;</span><span class="p">),</span> <span class="mi">9999</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">server</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">...</span>

    <span class="cm">/** test magicNum endpoint */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testMagicNumEndpoint</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="n">RequestBuilder</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/magicNum&quot;</span><span class="p">);</span>
        <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">SERVER</span><span class="p">.</span><span class="na">httpRequest</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">Status</span><span class="p">.</span><span class="na">Ok</span><span class="p">(),</span> <span class="n">response</span><span class="p">.</span><span class="na">status</span><span class="p">());</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;42&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="na">contentString</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://github.com/twitter/finatra/tree/develop/examples/http-server/java/src/main/java">java-http-server</a>
for a full example of using the <cite>#bind[T]</cite> DSL in test to override a binding in a server.</p>
</section>
<section id="injecting-members-of-a-test">
<h2>Injecting Members of a Test<a class="headerlink" href="#injecting-members-of-a-test" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not inject members of a test class into the server, application or <a class="reference external" href="./integration_tests.html#id2"><cite>TestInjector</cite></a> object
graph under test.</p>
</div>
<p>We strongly <strong>discourage</strong> injecting members of a test via your server, application or
<a class="reference external" href="./integration_tests.html#id2"><cite>TestInjector</cite></a>. This includes using <cite>&#64;Inject</cite> or <cite>&#64;Bind</cite> (the <cite>com.google.inject.testing.fieldbinder.Bind</cite>
annotation with the <a class="reference external" href="https://github.com/google/guice/wiki/BoundFields">BoundFieldModule</a>) on a
test member field then using the <a class="reference external" href="https://github.com/twitter/finatra/blob/develop/inject/inject-core/src/main/scala/com/twitter/inject/Injector.scala">c.t.inject.Injector</a>
of the server, application or <a class="reference external" href="./integration_tests.html#id2"><cite>TestInjector</cite></a> under test to do <cite>injector.underlying.injectMembers(this)</cite>.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyIntegrationTest</span> <span class="k">extends</span> <span class="nc">IntegrationTest</span> <span class="p">{</span>

  <span class="c1">// THIS IS NOT RECOMMENDED</span>
  <span class="nd">@Bind</span><span class="p">(</span><span class="n">to</span> <span class="o">=</span> <span class="k">classOf</span><span class="p">[</span><span class="nc">StubBarImp</span><span class="p">])</span> <span class="k">private</span> <span class="kd">val</span> <span class="n">bar</span><span class="p">:</span> <span class="nc">Bar</span>
  <span class="c1">// Foo depends on Bar.</span>
  <span class="nd">@Inject</span> <span class="k">private</span> <span class="kd">val</span> <span class="n">foo</span><span class="p">:</span> <span class="nc">Foo</span>
  <span class="nd">@Bind</span> <span class="k">private</span> <span class="kd">val</span> <span class="n">mockDatasource</span><span class="p">:</span> <span class="nc">Datasource</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">DatasourceImplementation</span><span class="p">]</span>

  <span class="k">override</span> <span class="kd">val</span> <span class="n">injector</span> <span class="o">=</span>
    <span class="nc">TestInjector</span><span class="p">(</span>
      <span class="n">modules</span> <span class="o">=</span> <span class="nc">Seq</span><span class="p">(</span><span class="k">new</span> <span class="nc">OurGreatModule</span><span class="p">(),</span> <span class="nc">BoundFieldModule</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="bp">this</span><span class="p">)),</span>
    <span class="p">).</span><span class="n">create</span><span class="p">()</span>

    <span class="n">injector</span><span class="p">.</span><span class="n">injectMembers</span><span class="p">(</span><span class="bp">this</span><span class="p">)</span>

    <span class="n">test</span><span class="p">(</span><span class="s">&quot;test something&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Or you could choose to do the test class member injection in a <cite>beforeAll</cite>:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyIntegrationTest</span> <span class="k">extends</span> <span class="nc">IntegrationTest</span> <span class="p">{</span>

  <span class="c1">// THIS IS NOT RECOMMENDED</span>
  <span class="nd">@Bind</span><span class="p">(</span><span class="n">to</span> <span class="o">=</span> <span class="k">classOf</span><span class="p">[</span><span class="nc">StubBarImp</span><span class="p">])</span> <span class="k">private</span> <span class="kd">val</span> <span class="n">bar</span><span class="p">:</span> <span class="nc">Bar</span>
  <span class="c1">// Foo depends on Bar.</span>
  <span class="nd">@Inject</span> <span class="k">private</span> <span class="kd">val</span> <span class="n">foo</span><span class="p">:</span> <span class="nc">Foo</span>
  <span class="nd">@Bind</span> <span class="k">private</span> <span class="kd">val</span> <span class="n">mockDatasource</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">DatasourceImplementation</span><span class="p">]</span>

  <span class="k">override</span> <span class="kd">val</span> <span class="n">injector</span> <span class="o">=</span>
    <span class="nc">TestInjector</span><span class="p">(</span>
      <span class="n">modules</span> <span class="o">=</span> <span class="nc">Seq</span><span class="p">(</span><span class="k">new</span> <span class="nc">OurGreatModule</span><span class="p">(),</span> <span class="nc">BoundFieldModule</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="bp">this</span><span class="p">)),</span>
    <span class="p">).</span><span class="n">create</span><span class="p">()</span>

  <span class="k">override</span> <span class="k">protected</span> <span class="k">def</span> <span class="nf">beforeAll</span><span class="p">():</span> <span class="nc">Unit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="bp">super</span><span class="p">.</span><span class="n">beforeAll</span><span class="p">()</span>
    <span class="n">injector</span><span class="p">.</span><span class="n">injectMembers</span><span class="p">(</span><span class="bp">this</span><span class="p">)</span>
  <span class="p">}</span>

    <span class="n">test</span><span class="p">(</span><span class="s">&quot;test something&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Or with a <a class="reference external" href="./feature_tests.html">FeatureTest</a>:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyFeatureTest</span> <span class="k">extends</span> <span class="nc">FeatureTest</span> <span class="p">{</span>
  <span class="c1">// THIS IS NOT RECOMMENDED</span>
  <span class="nd">@Inject</span> <span class="kd">val</span> <span class="n">fakeFilesystem</span><span class="p">:</span> <span class="nc">Filesystem</span>
  <span class="nd">@Inject</span> <span class="kd">val</span> <span class="n">mockSubsystem</span><span class="p">:</span> <span class="nc">Subsystem</span>

  <span class="k">override</span> <span class="kd">val</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmbeddedHttpServer</span><span class="p">(</span>
    <span class="n">twitterServer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OurHttpTwitterServerUnderTest</span> <span class="p">{</span>
      <span class="kd">val</span> <span class="n">modules</span><span class="p">:</span> <span class="nc">Seq</span><span class="p">[</span><span class="nc">Module</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaultModules</span> <span class="o">++</span> <span class="nc">Seq</span><span class="p">(</span><span class="nc">TestModuleWithTheSystemBindings</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">)</span>

  <span class="k">override</span> <span class="k">protected</span> <span class="k">def</span> <span class="nf">beforeAll</span><span class="p">():</span> <span class="nc">Unit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="bp">super</span><span class="p">.</span><span class="n">beforeAll</span><span class="p">()</span>
    <span class="n">server</span><span class="p">.</span><span class="n">injector</span><span class="p">.</span><span class="n">underlying</span><span class="p">.</span><span class="n">injectMembers</span><span class="p">(</span><span class="bp">this</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">test</span><span class="p">(</span><span class="s">&quot;test something&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<section id="why">
<h3>Why?<a class="headerlink" href="#why" title="Permalink to this headline">¶</a></h3>
<p>You can perhaps see from the above that there is an impedance mismatch from the creation of the
object graph under test via creation of the <cite>Injector</cite> and calling <cite>injectMembers(this)</cite>.</p>
<p>At the very least, this usage tends to violate the encapsulation of the system under test. As
mentioned previously, the object graph under test is created from a stateful <cite>Injector</cite> with a
lifecycle that is managed by the framework that is different from the lifecycle of the test class.
Mixing them in this manner is hard to reason about and can lead to possibly non-deterministic tests.
This usage also makes it harder to test <a class="reference external" href="./feature_tests.html#testing-multiple-applications-or-servers">multiple servers or applications</a>
in a single test file.</p>
<p>If something accesses a value from the <cite>Injector</cite> before <cite>beforeAll()</cite> was called, e.g., another eager
<cite>val</cite> in the constructor of the test class, this could potentially fail, or worse, an incorrect value
could be returned (since the <cite>Injector</cite> will try to instantiate whatever is asked for, relying on
any default no-arg constructor). Moving the <cite>injectMembers(this)</cite> to also be in the test class
constructor can help, but then ordering of calls is important as the <cite>injectMembers(this)</cite> would need
to happen before any access of <cite>Injector</cite> values that are expected to be bound. As such, we have
generally found that in any sufficiently large or complex test suite, this usages tends towards
brittle tests.</p>
</section>
<section id="alternatives">
<h3>Alternatives<a class="headerlink" href="#alternatives" title="Permalink to this headline">¶</a></h3>
<section id="replacing-object-graph-bindings">
<h4>Replacing object graph bindings<a class="headerlink" href="#replacing-object-graph-bindings" title="Permalink to this headline">¶</a></h4>
<p>The framework provides ways to safely replace bindings in the object graph under test, properly
taking into account the lifecycle to handle parsing of flag values. Users should prefer to either
provide an <a class="reference external" href="./override_modules.html">override module</a> or use the <cite>#bind[T]</cite> DSL to replace a
binding <strong>when instantiating</strong> the object graph under test when it is necessary to <em>replace</em> a
binding in the object graph under test.</p>
</section>
<section id="managing-test-fixtures">
<h4>Managing test fixtures<a class="headerlink" href="#managing-test-fixtures" title="Permalink to this headline">¶</a></h4>
<p>One reason for test member injection is to be able to easily create test fixtures. If it is
necessary to use an object graph for managing some set of test fixture instances that are separate
from the server or application, <strong>do not use</strong> the <cite>Injector</cite> from the server, application, nor the
<a class="reference external" href="./integration_tests.html#id2"><cite>TestInjector</cite></a> under test. Instead, create a separate <cite>Injector</cite> – you can use a new
<a class="reference external" href="integration_tests.html#id2">c.t.inject.app.TestInjector</a> to aid in this.</p>
<p>Thus, we recommend that you explicitly create a separate object graph and obtain any necessary
instances from the appropriate object graph over using the indirection of injecting test members. In
this way, all object graphs are established at instantiation of the test member making it easier to
reason about the test lifecycle.</p>
<p>For example:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyIntegrationTest</span> <span class="k">extends</span> <span class="nc">IntegrationTest</span> <span class="p">{</span>

  <span class="k">private</span> <span class="kd">val</span> <span class="n">mockDatasource</span> <span class="o">=</span> <span class="n">mock</span><span class="p">[</span><span class="nc">DatasourceImplementation</span><span class="p">]</span>

  <span class="c1">// create an object graph for obtaining test fixtures. `OurIntegrationTestModule`</span>
  <span class="c1">// provides bindings for `Foo` and `Bar`</span>
  <span class="k">private</span><span class="p">[</span><span class="bp">this</span><span class="p">]</span> <span class="kd">val</span> <span class="n">testFixturesInjector</span> <span class="o">=</span>
    <span class="nc">TestInjector</span><span class="p">(</span>
      <span class="n">modules</span> <span class="o">=</span> <span class="nc">Seq</span><span class="p">(</span><span class="k">new</span> <span class="nc">OurIntegrationTestModule</span><span class="p">())</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="n">bind</span><span class="p">[</span><span class="nc">Datasource</span><span class="p">].</span><span class="n">toInstance</span><span class="p">(</span><span class="n">mockDatasource</span><span class="p">)</span>
    <span class="p">.</span><span class="n">create</span><span class="p">()</span>

  <span class="k">private</span> <span class="kd">val</span> <span class="n">foo</span><span class="p">:</span> <span class="nc">Foo</span> <span class="o">=</span> <span class="n">testFixturesInjector</span><span class="p">.</span><span class="n">instance</span><span class="p">[</span><span class="nc">Foo</span><span class="p">]</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="n">bar</span><span class="p">:</span> <span class="nc">Bar</span> <span class="o">=</span> <span class="n">testFixturesInjector</span><span class="p">.</span><span class="n">instance</span><span class="p">[</span><span class="nc">Bar</span><span class="p">]</span>

  <span class="c1">// the object graph under test</span>
  <span class="k">override</span> <span class="kd">val</span> <span class="n">injector</span> <span class="o">=</span>
    <span class="nc">TestInjector</span><span class="p">(</span>
      <span class="n">modules</span> <span class="o">=</span> <span class="nc">Seq</span><span class="p">(</span><span class="k">new</span> <span class="nc">OurGreatModule</span><span class="p">())</span>
    <span class="p">).</span><span class="n">create</span><span class="p">()</span>

  <span class="n">test</span><span class="p">(</span><span class="s">&quot;test something&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Or with a <a class="reference external" href="./feature_tests.html">FeatureTest</a>:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyFeatureTest</span> <span class="k">extends</span> <span class="nc">FeatureTest</span> <span class="p">{</span>

  <span class="c1">// create an object graph for obtaining test fixtures, `OurIntegrationTestModule`</span>
  <span class="c1">// provides bindings for `Filesystem` and `Subsystem`</span>
  <span class="k">private</span><span class="p">[</span><span class="bp">this</span><span class="p">]</span> <span class="kd">val</span> <span class="n">testFixturesInjector</span> <span class="o">=</span>
    <span class="nc">TestInjector</span><span class="p">(</span>
      <span class="n">modules</span> <span class="o">=</span> <span class="nc">Seq</span><span class="p">(</span><span class="k">new</span> <span class="nc">OurIntegrationTestModule</span><span class="p">())</span>
    <span class="p">).</span><span class="n">create</span><span class="p">()</span>

  <span class="k">private</span> <span class="kd">val</span> <span class="n">fakeFilesystem</span><span class="p">:</span> <span class="nc">Filesystem</span> <span class="o">=</span> <span class="n">testFixturesInjector</span><span class="p">.</span><span class="n">instance</span><span class="p">[</span><span class="nc">Filesystem</span><span class="p">]</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="n">mockSubsystem</span><span class="p">:</span> <span class="nc">Subsystem</span> <span class="o">=</span> <span class="n">testFixturesInjector</span><span class="p">.</span><span class="n">instance</span><span class="p">[</span><span class="nc">Subsystem</span><span class="p">]</span>

  <span class="c1">// the object graph under test is encapsulated in the embedded server</span>
  <span class="k">override</span> <span class="kd">val</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmbeddedHttpServer</span><span class="p">(</span>
    <span class="n">twitterServer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OurHttpTwitterServerUnderTest</span>
  <span class="p">)</span>

  <span class="n">test</span><span class="p">(</span><span class="s">&quot;test something&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is the same tactic taken in testing <a class="reference external" href="./feature_tests.html#testing-multiple-applications-or-servers">multiple servers or applications</a>
in a single test file. Each server or application encapsulates an <cite>Injector</cite> which is established at
instantiation of each server or application within the test. Any necessary instances are then explicitly
obtained from the appropriate object graph for use in testing.</p>
</section>
</section>
</section>
<section id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<p>More resources on <a class="reference external" href="http://xunitpatterns.com/Test%20Double.html">test doubles</a>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://martinfowler.com/articles/mocksArentStubs.html">Mocks Aren’t Stubs</a></p></li>
<li><p><a class="reference external" href="https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da">Test Doubles — Fakes, Mocks and Stubs.</a></p></li>
</ul>
</section>
<section id="more-information">
<h2>More Information<a class="headerlink" href="#more-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html"><span class="doc">Testing Features</span></a></p></li>
<li><p><a class="reference internal" href="embedded.html"><span class="doc">Embedded Servers and Apps</span></a></p></li>
<li><p><a class="reference internal" href="feature_tests.html"><span class="doc">Feature Tests</span></a></p></li>
<li><p><a class="reference internal" href="integration_tests.html"><span class="doc">Integration Tests</span></a></p></li>
<li><p><a class="reference internal" href="startup_tests.html"><span class="doc">Startup Tests</span></a></p></li>
<li><p><a class="reference internal" href="mocks.html"><span class="doc">Working with Mocks</span></a></p></li>
<li><p><a class="reference internal" href="mixins.html"><span class="doc">Test Mixins</span></a></p></li>
<li><p><a class="reference internal" href="override_modules.html"><span class="doc">Override Modules</span></a></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/finatra_logo.png" alt="Logo"/>
            </a></p><p>
  <a href="https://github.com/twitter/finatra">Finatra</a> is a Scala services framework built on top of <a href="https://twitter.github.io/twitter-server/">TwitterServer</a> and <a href="https://twitter.github.io/finagle/">Finagle</a>.
</p>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://twitter.github.io/finatra/user-guide">User's&nbsp;Guide</a></li>
  <li><a href="https://finagle.github.io/blog/">Finagle&nbsp;Blog</a></li>
  <li><a href="https://github.com/twitter/finatra">Finatra&nbsp;on&nbsp;Github</a></li>
  <li><a href="https://github.com/twitter/finatra/issues">Github&nbsp;Issues</a></li>
</ul>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Explicit Binding with <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code></a><ul>
<li><a class="reference internal" href="#embedded-bind-t">Embedded <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code></a></li>
<li><a class="reference internal" href="#testinjector-bind-t">TestInjector <code class="docutils literal notranslate"><span class="pre">#bind[T]</span></code></a></li>
<li><a class="reference internal" href="#bind-t-dsl"><cite>#bind[T]</cite> DSL</a></li>
<li><a class="reference internal" href="#usage-from-java">Usage from Java</a></li>
<li><a class="reference internal" href="#injecting-members-of-a-test">Injecting Members of a Test</a><ul>
<li><a class="reference internal" href="#why">Why?</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a><ul>
<li><a class="reference internal" href="#replacing-object-graph-bindings">Replacing object graph bindings</a></li>
<li><a class="reference internal" href="#managing-test-fixtures">Managing test fixtures</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#further-reading">Further Reading</a></li>
<li><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">User’s Guide</a><ul>
      <li>Previous: <a href="override_modules.html" title="previous chapter">Override Modules</a></li>
      <li>Next: <a href="../../presentations/index.html" title="next chapter">Finatra Presentations</a></li>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Search the contents of this site.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="github-fork-ribbon-wrapper right fixed" style="width: 150px;height: 150px;position: fixed;overflow: hidden;top: 0;z-index: 9999;pointer-events: none;right: 0;"><div class="github-fork-ribbon" style="position: absolute;padding: 2px 0;background-color: #900;background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));-webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);-moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);z-index: 9999;pointer-events: auto;top: 42px;right: -43px;-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg);transform: rotate(45deg);"><a target="_blank" href="https://github.com/twitter/finatra" style="font: 700 13px &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color: #fff;text-decoration: none;text-shadow: 0 -1px rgba(0, 0, 0, 0.5);text-align: center;width: 200px;line-height: 20px;display: inline-block;padding: 2px 0;border-width: 1px 0;border-style: dotted;border-color: rgba(255, 255, 255, 0.7);">Fork me on GitHub</a></div></div>
  

  <div class="footer">
    &copy; Copyright 2024 Twitter, Inc.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</div>
  
  </body>
</html>